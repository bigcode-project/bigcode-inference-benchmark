# bigcode-inference-benchmark

BLOOM\
A100 80GB

tokens/sec | msec/token
| batch_size |    HF (fp32)    |    HF (bf16)    |    HF (int8)    |
|:----------:|:---------------:|:---------------:|:---------------:|
| 1          | 44.38 \| 22.53  | 42.23 \| 23.68  |                 |
| 2          | 85.82 \| 11.65  | 83.79 \| 11.93  |                 |
| 4          | 171.77 \| 5.82  | 168.91 \| 5.92  |                 |
| 8          | 334.21 \| 2.99  | 328.11 \| 3.05  |                 |
| 16         | 658.77 \| 1.52  | 669.15 \| 1.49  |                 |
| 32         | 1312.31 \| 0.76 | 1277.78 \| 0.78 |                 |
| 64         | 2312.48 \| 0.43 | 2605.26 \| 0.38 |                 |
| 128        | 2686.37 \| 0.37 | 4780.32 \| 0.21 |                 |
| 256        | 3313.04 \| 0.30 | 6549.67 \| 0.15 |                 |
| 384        | 3253.52 \| 0.31 | 7319.86 \| 0.14 |                 |
| 512        | 3361.34 \| 0.30 | 7425.47 \| 0.13 |                 |
| 640        | 3497.55 \| 0.29 | 7553.05 \| 0.13 |                 |
| 768        | 3460.71 \| 0.29 | 7681.78 \| 0.13 |                 |
| 896        | 3339.99  \| 0.30 | 7544.19 \| 0.13 |                 |
| 1024       | oom             | 7703.84 \| 0.13 |                 |
| 1152       | oom             | 7728.71 \| 0.13 |                 |
| 1280       | oom             | 7799.99 \| 0.13 |                 |
| 1408       | oom             | 7776.64 \| 0.13 |                 |
| 1536       | oom             | 7802.61 \| 0.13 |                 |
| 1664       | oom             | 7783.20 \| 0.13 |                 |
| 1792       | oom             | 7738.55 \| 0.13 |                 |
| 1920       | oom             | oom             |                 |

sec
| batch_size | HF (fp32) | HF (bf16) | HF (int8) |
|:----------:|:---------:|:---------:|:---------:|
| 1          | 2.25      | 2.37      |                    |
| 2          | 2.33      | 2.39      |                    |
| 4          | 2.33      | 2.37      |                    |
| 8          | 2.39      | 2.44      |                    |
| 16         | 2.43      | 2.39      |                    |
| 32         | 2.44      | 2.50      |                    |
| 64         | 2.77      | 2.46      |                    |
| 128        | 4.76      | 2.68      |                    |
| 256        | 7.73      | 3.91      |                    |
| 384        | 11.80     | 5.25      |                    |
| 512        | 15.23     | 6.90      |                    |
| 640        | 18.30     | 8.47      |                    |
| 768        | 22.19     | 10.00     |                    |
| 896        | 26.83     | 11.88     |                    |
| 1024       | oom       | 13.29     |                    |
| 1152       | oom       | 14.91     |                    |
| 1280       | oom       | 16.41     |                    |
| 1408       | oom       | 18.11     |                    |
| 1536       | oom       | 19.69     |                    |
| 1664       | oom       | 21.38     |                    |
| 1792       | oom       | 23.16     |                    |
| 1920       | oom       | oom       |                    |